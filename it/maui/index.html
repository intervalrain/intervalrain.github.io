<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>[IT] .NET Maui | Rain Hu's Workspace</title>
<meta name=keywords content="IT,C#,.net,maui"><meta name=description content='.NET Maui .NET Maui 是一個跨平台的桌面與手機應用開發框架，它支援 iOS、Android、macOS、Windows。 不同於 Xamarin，.NET Maui 只需要一個專案便可以導向不同的平台。 架構 一個 .NET Maui 專案底下，預設會有幾個資料夾與檔案，其關係如下圖： /Platforms 底下的各個資料夾為不同平台的入口，不同的平台各有一個 Program.cs。 各個 Program.cs 內又會透過注入該 namespace 底下的 AppDelegate ，將入口指向 MauiProgram 的 CreateMauiApp()，就此將不同平台路由到 MauiProgram.cs 這個統一的入口。 public class Program { static void Main(string[] args) { UIApplication.Main(args, null, typeof(AppDelegate)); } } [Register("AppDelegate")] public class AppDelegate : MauiUIApplicationDelegate { protected override MauiApp CreateMauiApp() => MauiProgram.CreateMauiApp(); } 關係如下圖： graph TD; iOS-->MauiProgram.cs; Android-->MauiProgram.cs; Windows-->MauiProgram.cs; macOS-->MauiProgram.cs; MauiProgram.cs-->App; App-->AppShell; AppShell-.->Page1; AppShell-.->Page2; AppShell-.->Page3; AppShell-.'><meta name=author content="Rain Hu"><link rel=canonical href=https://intervalrain.github.io/><meta name=google-site-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.min.62544d021d74c1d1215183b216a7ce71465bcb05e8768851d5c6d332d9672210.css integrity="sha256-YlRNAh10wdEhUYOyFqfOcUZbywXodohR1cbTMtlnIhA=" rel="preload stylesheet" as=style><link rel=preload href=/images/rain.png as=image><script defer crossorigin=anonymous src=/assets/js/highlight.min.2eadbb982468c11a433a3e291f01326f2ba43f065e256bf792dbd79640a92316.js integrity="sha256-Lq27mCRowRpDOj4pHwEybyukPwZeJWv3ktvXlkCpIxY=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://intervalrain.github.io/images/rain.png><link rel=icon type=image/png sizes=16x16 href=https://intervalrain.github.io/images/rain.png><link rel=icon type=image/png sizes=32x32 href=https://intervalrain.github.io/images/rain.png><link rel=apple-touch-icon href=https://intervalrain.github.io/images/rain.png><link rel=mask-icon href=https://intervalrain.github.io/images/rain.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://intervalrain.github.io/it/maui/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css integrity=sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.js integrity=sha384-GxNFqL3r9uRJQhR+47eDxuPoNE7yLftQM8LcxzgS4HT73tp970WS/wV5p8UzCOmb crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/contrib/auto-render.min.js integrity=sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl crossorigin=anonymous onload=renderMathInElement(document.body)></script><script async src=https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js></script><script src=https://utteranc.es/client.js repo=intervalrain.github.io issue-term=pathname label=Comment theme=github-light crossorigin=anonymous async></script><meta property="og:title" content="[IT] .NET Maui"><meta property="og:description" content='.NET Maui .NET Maui 是一個跨平台的桌面與手機應用開發框架，它支援 iOS、Android、macOS、Windows。 不同於 Xamarin，.NET Maui 只需要一個專案便可以導向不同的平台。 架構 一個 .NET Maui 專案底下，預設會有幾個資料夾與檔案，其關係如下圖： /Platforms 底下的各個資料夾為不同平台的入口，不同的平台各有一個 Program.cs。 各個 Program.cs 內又會透過注入該 namespace 底下的 AppDelegate ，將入口指向 MauiProgram 的 CreateMauiApp()，就此將不同平台路由到 MauiProgram.cs 這個統一的入口。 public class Program { static void Main(string[] args) { UIApplication.Main(args, null, typeof(AppDelegate)); } } [Register("AppDelegate")] public class AppDelegate : MauiUIApplicationDelegate { protected override MauiApp CreateMauiApp() => MauiProgram.CreateMauiApp(); } 關係如下圖： graph TD; iOS-->MauiProgram.cs; Android-->MauiProgram.cs; Windows-->MauiProgram.cs; macOS-->MauiProgram.cs; MauiProgram.cs-->App; App-->AppShell; AppShell-.->Page1; AppShell-.->Page2; AppShell-.->Page3; AppShell-.'><meta property="og:type" content="article"><meta property="og:url" content="https://intervalrain.github.io/it/maui/"><meta property="article:section" content="it"><meta property="article:published_time" content="2024-01-28T13:30:34+08:00"><meta property="article:modified_time" content="2024-01-28T13:30:34+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="[IT] .NET Maui"><meta name=twitter:description content='.NET Maui .NET Maui 是一個跨平台的桌面與手機應用開發框架，它支援 iOS、Android、macOS、Windows。 不同於 Xamarin，.NET Maui 只需要一個專案便可以導向不同的平台。 架構 一個 .NET Maui 專案底下，預設會有幾個資料夾與檔案，其關係如下圖： /Platforms 底下的各個資料夾為不同平台的入口，不同的平台各有一個 Program.cs。 各個 Program.cs 內又會透過注入該 namespace 底下的 AppDelegate ，將入口指向 MauiProgram 的 CreateMauiApp()，就此將不同平台路由到 MauiProgram.cs 這個統一的入口。 public class Program { static void Main(string[] args) { UIApplication.Main(args, null, typeof(AppDelegate)); } } [Register("AppDelegate")] public class AppDelegate : MauiUIApplicationDelegate { protected override MauiApp CreateMauiApp() => MauiProgram.CreateMauiApp(); } 關係如下圖： graph TD; iOS-->MauiProgram.cs; Android-->MauiProgram.cs; Windows-->MauiProgram.cs; macOS-->MauiProgram.cs; MauiProgram.cs-->App; App-->AppShell; AppShell-.->Page1; AppShell-.->Page2; AppShell-.->Page3; AppShell-.'><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"ITs","item":"https://intervalrain.github.io/it/"},{"@type":"ListItem","position":2,"name":"[IT] .NET Maui","item":"https://intervalrain.github.io/it/maui/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"[IT] .NET Maui","name":"[IT] .NET Maui","description":".NET Maui .NET Maui 是一個跨平台的桌面與手機應用開發框架，它支援 iOS、Android、macOS、Windows。 不同於 Xamarin，.NET Maui 只需要一個專案便可以導向不同的平台。 架構 一個 .NET Maui 專案底下，預設會有幾個資料夾與檔案，其關係如下圖： /Platforms 底下的各個資料夾為不同平台的入口，不同的平台各有一個 Program.cs。 各個 Program.cs 內又會透過注入該 namespace 底下的 AppDelegate ，將入口指向 MauiProgram 的 CreateMauiApp()，就此將不同平台路由到 MauiProgram.cs 這個統一的入口。 public class Program { static void Main(string[] args) { UIApplication.Main(args, null, typeof(AppDelegate)); } } [Register(\u0026#34;AppDelegate\u0026#34;)] public class AppDelegate : MauiUIApplicationDelegate { protected override MauiApp CreateMauiApp() =\u0026gt; MauiProgram.CreateMauiApp(); } 關係如下圖： graph TD; iOS--\u003eMauiProgram.cs; Android--\u003eMauiProgram.cs; Windows--\u003eMauiProgram.cs; macOS--\u003eMauiProgram.cs; MauiProgram.cs--\u003eApp; App--\u003eAppShell; AppShell-.-\u003ePage1; AppShell-.-\u003ePage2; AppShell-.-\u003ePage3; AppShell-.","keywords":["IT","C#",".net","maui"],"articleBody":".NET Maui .NET Maui 是一個跨平台的桌面與手機應用開發框架，它支援 iOS、Android、macOS、Windows。 不同於 Xamarin，.NET Maui 只需要一個專案便可以導向不同的平台。 架構 一個 .NET Maui 專案底下，預設會有幾個資料夾與檔案，其關係如下圖： /Platforms 底下的各個資料夾為不同平台的入口，不同的平台各有一個 Program.cs。 各個 Program.cs 內又會透過注入該 namespace 底下的 AppDelegate ，將入口指向 MauiProgram 的 CreateMauiApp()，就此將不同平台路由到 MauiProgram.cs 這個統一的入口。 public class Program { static void Main(string[] args) { UIApplication.Main(args, null, typeof(AppDelegate)); } } [Register(\"AppDelegate\")] public class AppDelegate : MauiUIApplicationDelegate { protected override MauiApp CreateMauiApp() =\u003e MauiProgram.CreateMauiApp(); } 關係如下圖： graph TD; iOS--\u003eMauiProgram.cs; Android--\u003eMauiProgram.cs; Windows--\u003eMauiProgram.cs; macOS--\u003eMauiProgram.cs; MauiProgram.cs--\u003eApp; App--\u003eAppShell; AppShell-.-\u003ePage1; AppShell-.-\u003ePage2; AppShell-.-\u003ePage3; AppShell-.-\u003ePage4; public static class MauiProgram { public static MauiApp CreateMauiApp() { var builder = MauiApp.CreateBuilder(); builder .UseMauiApp() .ConfigureFonts(fonts =\u003e { fonts.AddFont(\"OpenSans-Regular.ttf\", \"OpenSansRegular\"); fonts.AddFont(\"OpenSans-Semibold.ttf\", \"OpenSansSemibold\"); }); return builder.Build(); } } public partial class App : Application { public App() { InitializeComponent(); MainPage = new AppShell(); } } 從上面兩段程式 MauiProgram.cs 與 App.xaml.cs 可以看出，這個統一的進入點會開啟 App，並將 AppShell 作為 MainPage 開放。 Router 在此可以發現 AppShell 作為一個 Controller 的功能，用來引導頁面的路由。 我們可以透過 RegisterRoute 來注冊要顯示的頁面。 public partial class AppShell : Shell { public AppShell() { InitializeComponent(); Routing.RegisterRoute(nameof(Page1), typeof(Page1)); Routing.RegisterRoute(nameof(Page2), typeof(Page2)); Routing.RegisterRoute(nameof(Page3), typeof(Page3)); } } xaml 上述的頁面可以透過新增 xaml 檔來建立： 以下為一個 xaml 檔的 sample x:class=\"MoneyTrack.AppShell\" 表示該檔案的路徑為 MoneyTrack.AppShell mlns 關鍵字很像是 using： xmlns:views=\"clr-namespace:MoneyTrack.Views\": 代表將 MoneyTrack.Views 這個路徑命名成 views。 ShellContent 內代表是首頁要導引至的頁面，如下例會導向 view:MoneyTackPage \u003c?xml version=\"1.0\" encoding=\"UTF-8\" ?\u003e \u003cShell x:Class=\"MoneyTrack.AppShell\" xmlns=\"http://schemas.microsoft.com/dotnet/2021/maui\" xmlns:x=\"http://schemas.microsoft.com/winfx/2009/xaml\" xmlns:local=\"clr-namespace:MoneyTrack\" xmlns:views=\"clr-namespace:MoneyTrack.Views\" Shell.FlyoutBehavior=\"Disabled\" Title=\"MoneyTrack\"\u003e \u003cShellContent Title=\"Home\" ContentTemplate=\"{DataTemplate views:MoneyTackPage}\" Route=\"MoneyTackPage\" /\u003e \u003c/Shell\u003e \u003c?xml version=\"1.0\" encoding=\"utf-8\" ?\u003e \u003cContentPage xmlns=\"http://schemas.microsoft.com/dotnet/2021/maui\" xmlns:x=\"http://schemas.microsoft.com/winfx/2009/xaml\" x:Class=\"MoneyTrack.Views.ContactsPage\" Title=\"Contacts\"\u003e \u003cVerticalStackLayout Spacing=\"5\"\u003e \u003cLabel Text=\"Welcome to .NET MAUI!\" VerticalOptions=\"Center\" HorizontalOptions=\"Center\" /\u003e \u003cButton x:Name=\"btn1\" Clicked=\"btn1_Clicked\" Text=\"click1\"\u003e\u003c/Button\u003e \u003cButton x:Name=\"btn2\" Clicked=\"btn2_Clicked\" Text=\"click2\"\u003e\u003c/Button\u003e \u003c/VerticalStackLayout\u003e \u003c/ContentPage\u003e Shell 接著我們可以透過 Shell 來控制面版上要顯示的頁面： public void btnPage1_Clicked() { Shell.Current.GoToAsync(nameof(Page1)); } GoToAsync Shell 本身是一個 View，也是一個 Layout GoToAsync 可以用來切換頁面 void btnPage1_Clicked(object sender, EvertArgs e) { Shell.Current.GoToAsync($\"{nameof(Page1)}\"); // 前往 Page1 } void btnCancel_Clicked(object sender, EvertArgs e) { Shell.Current.GoToAsync($\"//{nameof(MainPage)}\"); // 回到 MainPage } void btnCancel_Clicked(object sender, EvertArgs e) { Shell.Current.GoToAsync($\"..\"); // 回到上一頁 } QueryProperty 透過 QueryPropertyAttribute 可以達到如 http method 裡的 get 的方法。 以下範例等同於實現 page1?Id=1，在路由到 page1 的同時，將 property: Id 賦值。 [QueryProperty(nameof(PageId), \"Id\")] public partial class Page1 : ContentPage { public EditContactPage() { InitializeComponent(); } public string ContactId { set { lblName.Text = Id; } } } ","wordCount":"315","inLanguage":"en","datePublished":"2024-01-28T13:30:34+08:00","dateModified":"2024-01-28T13:30:34+08:00","author":{"@type":"Person","name":"Rain Hu"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://intervalrain.github.io/it/maui/"},"publisher":{"@type":"Organization","name":"Rain Hu's Workspace","logo":{"@type":"ImageObject","url":"https://intervalrain.github.io/images/rain.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://intervalrain.github.io/ accesskey=h title="Rain Hu's Workspace (Alt + H)"><img src=https://intervalrain.github.io/images/rain.png alt=logo aria-label=logo height=35>Rain Hu's Workspace</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></span></div><ul id=menu><li><a href=https://intervalrain.github.io/search title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://intervalrain.github.io/aboutme title="About me"><span>About me</span></a></li><li><a href=https://intervalrain.github.io/archives title=Archives><span>Archives</span></a></li><li><a href=https://intervalrain.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://intervalrain.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://intervalrain.github.io/csharp/csharp title=C#><span>C#</span></a></li><li><a href=https://intervalrain.github.io/csindex title=CS><span>CS</span></a></li><li><a href=https://intervalrain.github.io/leetcode title=LeetCode><span>LeetCode</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://intervalrain.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://intervalrain.github.io/it/>ITs</a></div><h1 class=post-title>[IT] .NET Maui</h1><div class=post-meta>&lt;span title='2024-01-28 13:30:34 +0800 +0800'>January 28, 2024&lt;/span>&amp;nbsp;·&amp;nbsp;2 min&amp;nbsp;·&amp;nbsp;Rain Hu&nbsp;|&nbsp;<a href=https://github.com/intervalrain/intervalrain.github.io/tree/main/content//IT/maui.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#net-maui aria-label=".NET Maui">.NET Maui</a><ul><li><a href=#%e6%9e%b6%e6%a7%8b aria-label=架構>架構</a></li><li><a href=#router aria-label=Router>Router</a></li><li><a href=#xaml aria-label=xaml>xaml</a></li><li><a href=#shell aria-label=Shell>Shell</a></li><li><a href=#gotoasync aria-label=GoToAsync>GoToAsync</a></li><li><a href=#queryproperty aria-label=QueryProperty>QueryProperty</a></li></ul></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h1 id=net-maui>.NET Maui<a hidden class=anchor aria-hidden=true href=#net-maui>#</a></h1><ul><li>.NET Maui 是一個跨平台的桌面與手機應用開發框架，它支援 iOS、Android、macOS、Windows。</li><li>不同於 Xamarin，.NET Maui 只需要一個專案便可以導向不同的平台。
<img src=/IT/img/maui.jpg width=300></li></ul><hr><h2 id=架構>架構<a hidden class=anchor aria-hidden=true href=#架構>#</a></h2><img src=/IT/img/maui_hierarchy.jpg width=300><ul><li>一個 .NET Maui 專案底下，預設會有幾個資料夾與檔案，其關係如下圖：<ul><li><code>/Platforms</code> 底下的各個資料夾為不同平台的入口，不同的平台各有一個 <code>Program.cs</code>。</li><li>各個 <code>Program.cs</code> 內又會透過注入該 namespace 底下的 <code>AppDelegate</code> ，將入口指向 <code>MauiProgram</code> 的 <code>CreateMauiApp()</code>，就此將不同平台路由到 <code>MauiProgram.cs</code> 這個統一的入口。</li></ul></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Csharp data-lang=Csharp><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Program</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> Main(<span style=color:#66d9ef>string</span>[] args)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        UIApplication.Main(args, <span style=color:#66d9ef>null</span>, <span style=color:#66d9ef>typeof</span>(AppDelegate));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#a6e22e>
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>[Register(&#34;AppDelegate&#34;)]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AppDelegate</span> : MauiUIApplicationDelegate
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>override</span> MauiApp CreateMauiApp() =&gt; MauiProgram.CreateMauiApp();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ul><li>關係如下圖：<div class=mermaid>graph TD;
iOS-->MauiProgram.cs;
Android-->MauiProgram.cs;
Windows-->MauiProgram.cs;
macOS-->MauiProgram.cs;
MauiProgram.cs-->App;
App-->AppShell;
AppShell-.->Page1;
AppShell-.->Page2;
AppShell-.->Page3;
AppShell-.->Page4;</div></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Csharp data-lang=Csharp><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MauiProgram</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> MauiApp CreateMauiApp()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> builder = MauiApp.CreateBuilder();
</span></span><span style=display:flex><span>        builder
</span></span><span style=display:flex><span>            .UseMauiApp&lt;App&gt;()
</span></span><span style=display:flex><span>            .ConfigureFonts(fonts =&gt;
</span></span><span style=display:flex><span>            {
</span></span><span style=display:flex><span>                fonts.AddFont(<span style=color:#e6db74>&#34;OpenSans-Regular.ttf&#34;</span>, <span style=color:#e6db74>&#34;OpenSansRegular&#34;</span>);
</span></span><span style=display:flex><span>				fonts.AddFont(<span style=color:#e6db74>&#34;OpenSans-Semibold.ttf&#34;</span>, <span style=color:#e6db74>&#34;OpenSansSemibold&#34;</span>);
</span></span><span style=display:flex><span>            });
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> builder.Build();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>partial</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>App</span> : Application
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> App()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        InitializeComponent();
</span></span><span style=display:flex><span>        MainPage = <span style=color:#66d9ef>new</span> AppShell();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ul><li>從上面兩段程式 <code>MauiProgram.cs</code> 與 <code>App.xaml.cs</code> 可以看出，這個統一的進入點會開啟 App，並將 <code>AppShell</code> 作為 MainPage 開放。</li></ul><hr><h2 id=router>Router<a hidden class=anchor aria-hidden=true href=#router>#</a></h2><ul><li>在此可以發現 <code>AppShell</code> 作為一個 Controller 的功能，用來引導頁面的路由。</li><li>我們可以透過 <code>RegisterRoute</code> 來注冊要顯示的頁面。</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Csharp data-lang=Csharp><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>partial</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AppShell</span> : Shell
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> AppShell()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        InitializeComponent();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        Routing.RegisterRoute(nameof(Page1), <span style=color:#66d9ef>typeof</span>(Page1));
</span></span><span style=display:flex><span>        Routing.RegisterRoute(nameof(Page2), <span style=color:#66d9ef>typeof</span>(Page2));
</span></span><span style=display:flex><span>        Routing.RegisterRoute(nameof(Page3), <span style=color:#66d9ef>typeof</span>(Page3));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><hr><h2 id=xaml>xaml<a hidden class=anchor aria-hidden=true href=#xaml>#</a></h2><ul><li>上述的頁面可以透過新增 <code>xaml</code> 檔來建立：</li><li>以下為一個 <code>xaml</code> 檔的 sample<ul><li><code>x:class="MoneyTrack.AppShell"</code> 表示該檔案的路徑為 <code>MoneyTrack.AppShell</code></li><li><code>mlns</code> 關鍵字很像是 <code>using</code>：<ul><li><code>xmlns:views="clr-namespace:MoneyTrack.Views"</code>: 代表將 <code>MoneyTrack.Views</code> 這個路徑命名成 <code>views</code>。</li></ul></li><li>ShellContent 內代表是首頁要導引至的頁面，如下例會導向 <code>view:MoneyTackPage</code></li></ul></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>Shell</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>x:Class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;MoneyTrack.AppShell&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>xmlns</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;http://schemas.microsoft.com/dotnet/2021/maui&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>xmlns:x</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;http://schemas.microsoft.com/winfx/2009/xaml&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>xmlns:local</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;clr-namespace:MoneyTrack&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>xmlns:views</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;clr-namespace:MoneyTrack.Views&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Shell</span><span style=color:#960050;background-color:#1e0010>.</span><span style=color:#a6e22e>FlyoutBehavior</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Disabled&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;MoneyTrack&#34;</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>ShellContent</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Home&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>ContentTemplate</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{DataTemplate views:MoneyTackPage}&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Route</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;MoneyTackPage&#34;</span> /&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>Shell</span>&gt;
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34; ?&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>ContentPage</span> <span style=color:#a6e22e>xmlns</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;http://schemas.microsoft.com/dotnet/2021/maui&#34;</span>
</span></span><span style=display:flex><span>             <span style=color:#a6e22e>xmlns:x</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;http://schemas.microsoft.com/winfx/2009/xaml&#34;</span>
</span></span><span style=display:flex><span>             <span style=color:#a6e22e>x:Class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;MoneyTrack.Views.ContactsPage&#34;</span>
</span></span><span style=display:flex><span>             <span style=color:#a6e22e>Title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Contacts&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>VerticalStackLayout</span> <span style=color:#a6e22e>Spacing</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;5&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>Label</span> 
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>Text</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Welcome to .NET MAUI!&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>VerticalOptions</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Center&#34;</span> 
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>HorizontalOptions</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Center&#34;</span> /&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>Button</span> <span style=color:#a6e22e>x:Name</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;btn1&#34;</span> <span style=color:#a6e22e>Clicked</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;btn1_Clicked&#34;</span> <span style=color:#a6e22e>Text</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;click1&#34;</span>&gt;&lt;/<span style=color:#f92672>Button</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>Button</span> <span style=color:#a6e22e>x:Name</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;btn2&#34;</span> <span style=color:#a6e22e>Clicked</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;btn2_Clicked&#34;</span> <span style=color:#a6e22e>Text</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;click2&#34;</span>&gt;&lt;/<span style=color:#f92672>Button</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>VerticalStackLayout</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>ContentPage</span>&gt;
</span></span></code></pre></div><h2 id=shell>Shell<a hidden class=anchor aria-hidden=true href=#shell>#</a></h2><ul><li>接著我們可以透過 <code>Shell</code> 來控制面版上要顯示的頁面：</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Csharp data-lang=Csharp><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> btnPage1_Clicked()
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    Shell.Current.GoToAsync(nameof(Page1));
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=gotoasync>GoToAsync<a hidden class=anchor aria-hidden=true href=#gotoasync>#</a></h2><ul><li>Shell 本身是一個 View，也是一個 Layout</li><li><code>GoToAsync</code> 可以用來切換頁面</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Csharp data-lang=Csharp><span style=display:flex><span><span style=color:#66d9ef>void</span> btnPage1_Clicked(<span style=color:#66d9ef>object</span> sender, EvertArgs e)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    Shell.Current.GoToAsync(<span style=color:#e6db74>$&#34;{nameof(Page1)}&#34;</span>);  <span style=color:#75715e>// 前往 Page1</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> btnCancel_Clicked(<span style=color:#66d9ef>object</span> sender, EvertArgs e)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    Shell.Current.GoToAsync(<span style=color:#e6db74>$&#34;//{nameof(MainPage)}&#34;</span>);  <span style=color:#75715e>// 回到 MainPage</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> btnCancel_Clicked(<span style=color:#66d9ef>object</span> sender, EvertArgs e)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    Shell.Current.GoToAsync(<span style=color:#e6db74>$&#34;..&#34;</span>);  <span style=color:#75715e>// 回到上一頁</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=queryproperty>QueryProperty<a hidden class=anchor aria-hidden=true href=#queryproperty>#</a></h2><ul><li>透過 <code>QueryPropertyAttribute</code> 可以達到如 http method 裡的 get 的方法。</li><li>以下範例等同於實現 <code>page1?Id=1</code>，在路由到 page1 的同時，將 property: Id 賦值。</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Csharp data-lang=Csharp><span style=display:flex><span><span style=color:#a6e22e>[QueryProperty(nameof(PageId), &#34;Id&#34;)]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>partial</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Page1</span> : ContentPage
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>public</span> EditContactPage()
</span></span><span style=display:flex><span>	{
</span></span><span style=display:flex><span>		InitializeComponent();
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>string</span> ContactId
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>set</span>
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            lblName.Text = Id;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://intervalrain.github.io/tags/it/>IT</a></li><li><a href=https://intervalrain.github.io/tags/c%23/>C#</a></li><li><a href=https://intervalrain.github.io/tags/.net/>.Net</a></li><li><a href=https://intervalrain.github.io/tags/maui/>Maui</a></li></ul></footer><script src=https://utteranc.es/client.js repo=Reid00/hugo-blog-talks issue-term=pathname label=Comment theme=github-light crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2024 <a href=https://intervalrain.github.io/>Rain Hu's Workspace</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>