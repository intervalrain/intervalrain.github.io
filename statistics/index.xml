<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>Statistics on Rain Hu's Workspace</title><link>https://intervalrain.github.io/statistics/</link><description>Recent content in Statistics on Rain Hu's Workspace</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Tue, 12 Dec 2023 22:16:04 +0800</lastBuildDate><atom:link href="https://intervalrain.github.io/statistics/index.xml" rel="self" type="application/rss+xml"/><item><title>[Statistics] a群體與b群體各別標準差求整體標準差</title><link>https://intervalrain.github.io/statistics/sigma/</link><pubDate>Tue, 12 Dec 2023 22:16:04 +0800</pubDate><guid>https://intervalrain.github.io/statistics/sigma/</guid><description>&lt;h1 id="given-sigma_a-and-sigma_b-ask-for-sigma">Given \(\sigma_a\) and \(\sigma_b\), Ask for \(\sigma\)&lt;/h1>
&lt;h2 id="1-簡化-sigma">1. 簡化 \(\sigma\)&lt;/h2>
&lt;ul>
&lt;li>將 \(\sigma\) 乘開
&lt;ul>
&lt;li>\(\sigma = \sqrt{\frac{\sum{(x_i-\bar x)^2}}{n}}\)&lt;/li>
&lt;li>\(\sigma = \sqrt{\frac{\sum{x_i^2-2\bar x\sum{x_i}+n\bar x^2}}{n}}\)&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>平均等於總和除以個數 \(\frac{\sum x_i}{n}=\bar x\)，故
&lt;ul>
&lt;li>\(\sigma = \sqrt{\frac{\sum x_i^2}{n}-\frac{2\bar x\sum x_i}{n}+\frac{n\bar x^2}{n}}\)&lt;/li>
&lt;li>\(\sigma = \sqrt{\frac{\sum x_i^2}{n}-2\bar x^2+\bar x^2}\)&lt;/li>
&lt;li>得 \(\boxed{\sigma = \sqrt{\frac{\sum x_i^2}{n}-\bar x^2}}-(1)\)&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="2-求個別平方和">2. 求個別平方和&lt;/h2>
&lt;ul>
&lt;li>由\((1)\)式可推得各別的標準差為
&lt;ul>
&lt;li>\(\boxed{\sigma_a = \sqrt{\frac{\sum x_{ai}^2}{n_a}-\bar x_a^2}}-(2)\)&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>且
&lt;ul>
&lt;li>\(\boxed{n = n_a+n_b}-(3)\)&lt;/li>
&lt;li>\(\boxed{\sum x_i^2=\sum x_{ai}^2+\sum x_{bi}^2}-(4)\)&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>欲求 \(\sum x_{ai}^2\)，我們將\((2)\)式展開
&lt;ul>
&lt;li>\(\sigma_a^2 = \frac{\sum x_{ai}^2}{n_a}-\bar x_a^2\)&lt;/li>
&lt;li>\(\sigma_a^2+\bar x_a^2= \frac{\sum x_{ai}^2}{n_a}\)&lt;/li>
&lt;li>得\(\boxed{\sum x_{ai}^2=n_a(\sigma_a^2+\bar x_a^2)}-(5)\)&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="3-求總體標準差">3. 求總體標準差&lt;/h2>
&lt;ul>
&lt;li>由\((1)\)式展開
&lt;ul>
&lt;li>得 \(\boxed{\sigma = \sqrt{\frac{(\sum x_{ai}^2+\sum x_{bi}^2)}{n}-\bar x^2}}-(6)\)&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>將\((5)\)代入\((6)\)
&lt;ul>
&lt;li>\(\boxed{\sigma=\sqrt{\frac{n_a(\sigma_a^2+\bar x_a^2)+n_b(\sigma_b^2+\bar x_n^2)}{n}-\bar x^2}}-(7)\)&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>其中 \(\boxed{\bar x=\frac{n_a\bar x_a + n_b\bar x_b}{n}}-(8)\)&lt;/li>
&lt;li>故我們可以從上式輾轉得通式：
&lt;ul>
&lt;li>\(\boxed{\sigma=\sqrt{\frac{\sum(n_i(\sigma_i^2+\bar x_i^2))}{n}-\bar x^2}}-(9)\)&lt;/li>
&lt;li>或寫成&lt;/li>
&lt;li>\(\boxed{\sigma=\sqrt{\frac{\sum(n_i(\sigma_i^2+\bar x_i^2))-\sum n_i\bar x_i}{n}}}-(9)\)&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="summary">summary&lt;/h2>
&lt;ul>
&lt;li>個數
&lt;ul>
&lt;li>\(\boxed{n=n_a+n_b=\sum n_i}\)&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>平均數
&lt;ul>
&lt;li>\(\boxed{\bar x=\frac{n_a\bar x_a+n_b\bar x_b}{n_a+n_b}=\frac{\sum{n_i\bar x_i}}{\sum{n_i}}}\)&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>標準差
&lt;ul>
&lt;li>\(\boxed{\sigma=\sqrt{\frac{n_{ai}(\sigma_{ai}^2+\bar x_{ai}^2)+n_{bi}(\sigma_{bi}^2+\bar x_{bi}^2)-(n_a\bar x_a+n_b\bar x_b)}{n_a+n_b}}=\sqrt{\frac{\sum(n_i(\sigma_i^2+\bar x_i^2))-\sum n_i\bar x_i}{\sum n_i}}}\)&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="4-sql">4. sql&lt;/h2>
&lt;ul>
&lt;li>現有一 table 存有&lt;/li>
&lt;li>&lt;code>avg_value&lt;/code>&lt;/li>
&lt;li>&lt;code>std_value&lt;/code>&lt;/li>
&lt;li>&lt;code>site_count&lt;/code>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">with&lt;/span> stats &lt;span style="color:#66d9ef">as&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">select&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">sum&lt;/span>(site_count&lt;span style="color:#f92672">*&lt;/span>avg_value)&lt;span style="color:#f92672">/&lt;/span>&lt;span style="color:#66d9ef">sum&lt;/span>(site_count) &lt;span style="color:#66d9ef">as&lt;/span> avg_value,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> sqrt((&lt;span style="color:#66d9ef">sum&lt;/span>(site_count&lt;span style="color:#f92672">*&lt;/span>(square(std_value)&lt;span style="color:#f92672">+&lt;/span>square(avg_value)))&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#66d9ef">sum&lt;/span>(site_count&lt;span style="color:#f92672">*&lt;/span>avg_value))&lt;span style="color:#f92672">/&lt;/span>&lt;span style="color:#66d9ef">sum&lt;/span>(site_count)) &lt;span style="color:#66d9ef">as&lt;/span> std_value,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">sum&lt;/span>(site_count) &lt;span style="color:#66d9ef">as&lt;/span> site_count
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">from&lt;/span> &lt;span style="color:#66d9ef">data&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">where&lt;/span> ...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">group&lt;/span> &lt;span style="color:#66d9ef">by&lt;/span> ...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">select&lt;/span> &lt;span style="color:#f92672">*&lt;/span> &lt;span style="color:#66d9ef">from&lt;/span> stats
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item></channel></rss>