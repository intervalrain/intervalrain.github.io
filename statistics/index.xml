<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>Statistics on Rain Hu's Workspace</title><link>https://intervalrain.github.io/statistics/</link><description>Recent content in Statistics on Rain Hu's Workspace</description><generator>Hugo -- 0.150.0</generator><language>zh-tw</language><lastBuildDate>Tue, 12 Dec 2023 22:16:04 +0800</lastBuildDate><atom:link href="https://intervalrain.github.io/statistics/index.xml" rel="self" type="application/rss+xml"/><item><title>[Statistics] a群體與b群體各別標準差求整體標準差</title><link>https://intervalrain.github.io/statistics/sigma/</link><pubDate>Tue, 12 Dec 2023 22:16:04 +0800</pubDate><guid>https://intervalrain.github.io/statistics/sigma/</guid><description>&lt;h1 id="given-sigma_a-and-sigma_b-ask-for-sigma"&gt;Given \(\sigma_a\) and \(\sigma_b\), Ask for \(\sigma\)&lt;/h1&gt;
&lt;h2 id="1-簡化-sigma"&gt;1. 簡化 \(\sigma\)&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;將 \(\sigma\) 乘開
&lt;ul&gt;
&lt;li&gt;\(\sigma = \sqrt{\frac{\sum{(x_i-\bar x)^2}}{n}}\)&lt;/li&gt;
&lt;li&gt;\(\sigma = \sqrt{\frac{\sum{x_i^2-2\bar x\sum{x_i}+n\bar x^2}}{n}}\)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;平均等於總和除以個數 \(\frac{\sum x_i}{n}=\bar x\)，故
&lt;ul&gt;
&lt;li&gt;\(\sigma = \sqrt{\frac{\sum x_i^2}{n}-\frac{2\bar x\sum x_i}{n}+\frac{n\bar x^2}{n}}\)&lt;/li&gt;
&lt;li&gt;\(\sigma = \sqrt{\frac{\sum x_i^2}{n}-2\bar x^2+\bar x^2}\)&lt;/li&gt;
&lt;li&gt;得 \(\boxed{\sigma = \sqrt{\frac{\sum x_i^2}{n}-\bar x^2}}-(1)\)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="2-求個別平方和"&gt;2. 求個別平方和&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;由\((1)\)式可推得各別的標準差為
&lt;ul&gt;
&lt;li&gt;\(\boxed{\sigma_a = \sqrt{\frac{\sum x_{ai}^2}{n_a}-\bar x_a^2}}-(2)\)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;且
&lt;ul&gt;
&lt;li&gt;\(\boxed{n = n_a+n_b}-(3)\)&lt;/li&gt;
&lt;li&gt;\(\boxed{\sum x_i^2=\sum x_{ai}^2+\sum x_{bi}^2}-(4)\)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;欲求 \(\sum x_{ai}^2\)，我們將\((2)\)式展開
&lt;ul&gt;
&lt;li&gt;\(\sigma_a^2 = \frac{\sum x_{ai}^2}{n_a}-\bar x_a^2\)&lt;/li&gt;
&lt;li&gt;\(\sigma_a^2+\bar x_a^2= \frac{\sum x_{ai}^2}{n_a}\)&lt;/li&gt;
&lt;li&gt;得\(\boxed{\sum x_{ai}^2=n_a(\sigma_a^2+\bar x_a^2)}-(5)\)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="3-求總體標準差"&gt;3. 求總體標準差&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;由\((1)\)式展開
&lt;ul&gt;
&lt;li&gt;得 \(\boxed{\sigma = \sqrt{\frac{(\sum x_{ai}^2+\sum x_{bi}^2)}{n}-\bar x^2}}-(6)\)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;將\((5)\)代入\((6)\)
&lt;ul&gt;
&lt;li&gt;\(\boxed{\sigma=\sqrt{\frac{n_a(\sigma_a^2+\bar x_a^2)+n_b(\sigma_b^2+\bar x_n^2)}{n}-\bar x^2}}-(7)\)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;其中 \(\boxed{\bar x=\frac{n_a\bar x_a + n_b\bar x_b}{n}}-(8)\)&lt;/li&gt;
&lt;li&gt;故我們可以從上式輾轉得通式：
&lt;ul&gt;
&lt;li&gt;\(\boxed{\sigma=\sqrt{\frac{\sum(n_i(\sigma_i^2+\bar x_i^2))}{n}-\bar x^2}}-(9)\)&lt;/li&gt;
&lt;li&gt;或寫成&lt;/li&gt;
&lt;li&gt;\(\boxed{\sigma=\sqrt{\frac{\sum(n_i(\sigma_i^2+\bar x_i^2))-\sum n_i\bar x_i}{n}}}-(9)\)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="summary"&gt;summary&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;個數
&lt;ul&gt;
&lt;li&gt;\(\boxed{n=n_a+n_b=\sum n_i}\)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;平均數
&lt;ul&gt;
&lt;li&gt;\(\boxed{\bar x=\frac{n_a\bar x_a+n_b\bar x_b}{n_a+n_b}=\frac{\sum{n_i\bar x_i}}{\sum{n_i}}}\)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;標準差
&lt;ul&gt;
&lt;li&gt;\(\boxed{\sigma=\sqrt{\frac{n_{ai}(\sigma_{ai}^2+\bar x_{ai}^2)+n_{bi}(\sigma_{bi}^2+\bar x_{bi}^2)-(n_a\bar x_a+n_b\bar x_b)}{n_a+n_b}}=\sqrt{\frac{\sum(n_i(\sigma_i^2+\bar x_i^2))-\sum n_i\bar x_i}{\sum n_i}}}\)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="4-sql"&gt;4. sql&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;現有一 table 存有&lt;/li&gt;
&lt;li&gt;&lt;code&gt;avg_value&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;std_value&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;site_count&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-sql" data-lang="sql"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;with&lt;/span&gt; stats &lt;span style="color:#66d9ef"&gt;as&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;select&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ...
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;sum&lt;/span&gt;(site_count&lt;span style="color:#f92672"&gt;*&lt;/span&gt;avg_value)&lt;span style="color:#f92672"&gt;/&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;sum&lt;/span&gt;(site_count) &lt;span style="color:#66d9ef"&gt;as&lt;/span&gt; avg_value,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; sqrt((&lt;span style="color:#66d9ef"&gt;sum&lt;/span&gt;(site_count&lt;span style="color:#f92672"&gt;*&lt;/span&gt;(square(std_value)&lt;span style="color:#f92672"&gt;+&lt;/span&gt;square(avg_value)))&lt;span style="color:#f92672"&gt;-&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;sum&lt;/span&gt;(site_count&lt;span style="color:#f92672"&gt;*&lt;/span&gt;avg_value))&lt;span style="color:#f92672"&gt;/&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;sum&lt;/span&gt;(site_count)) &lt;span style="color:#66d9ef"&gt;as&lt;/span&gt; std_value,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;sum&lt;/span&gt;(site_count) &lt;span style="color:#66d9ef"&gt;as&lt;/span&gt; site_count
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;from&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;data&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;where&lt;/span&gt; ...
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;group&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;by&lt;/span&gt; ...
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;select&lt;/span&gt; &lt;span style="color:#f92672"&gt;*&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;from&lt;/span&gt; stats
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description></item></channel></rss>