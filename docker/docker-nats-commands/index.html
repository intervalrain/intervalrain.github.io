<!doctype html><html lang=zh-tw dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>[Docker] Docker 指令 以 NATS 為例 | Rain Hu's Workspace</title><meta name=keywords content="Docker,NATS"><meta name=description content="Docker commands collection"><meta name=author content="Rain Hu"><link rel=canonical href=https://intervalrain.github.io/><meta name=google-site-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.4c6c0beaf1dfe52cd0f712a5896ac127e66fd064cfc598e04750f496d470699e.css integrity="sha256-TGwL6vHf5SzQ9xKliWrBJ+Zv0GTPxZjgR1D0ltRwaZ4=" rel="preload stylesheet" as=style><link rel=icon href=https://intervalrain.github.io/images/rain.png><link rel=icon type=image/png sizes=16x16 href=https://intervalrain.github.io/images/rain.png><link rel=icon type=image/png sizes=32x32 href=https://intervalrain.github.io/images/rain.png><link rel=apple-touch-icon href=https://intervalrain.github.io/images/rain.png><link rel=mask-icon href=https://intervalrain.github.io/images/rain.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh-tw href=https://intervalrain.github.io/docker/docker-nats-commands/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css integrity=sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.js integrity=sha384-GxNFqL3r9uRJQhR+47eDxuPoNE7yLftQM8LcxzgS4HT73tp970WS/wV5p8UzCOmb crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/contrib/auto-render.min.js integrity=sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl crossorigin=anonymous onload=renderMathInElement(document.body)></script><script async src=https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js></script><script src=https://utteranc.es/client.js repo=intervalrain.github.io issue-term=pathname label=Comment theme=github-light crossorigin=anonymous async></script><meta property="og:url" content="https://intervalrain.github.io/docker/docker-nats-commands/"><meta property="og:site_name" content="Rain Hu's Workspace"><meta property="og:title" content="[Docker] Docker 指令 以 NATS 為例"><meta property="og:description" content="Docker commands collection"><meta property="og:locale" content="zh-tw"><meta property="og:type" content="article"><meta property="article:section" content="docker"><meta property="article:published_time" content="2025-10-05T06:39:57+08:00"><meta property="article:modified_time" content="2025-10-05T06:39:57+08:00"><meta property="article:tag" content="Docker"><meta property="article:tag" content="NATS"><meta property="og:image" content="https://intervalrain.github.io/images/cover.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://intervalrain.github.io/images/cover.jpg"><meta name=twitter:title content="[Docker] Docker 指令 以 NATS 為例"><meta name=twitter:description content="Docker commands collection"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Dockers","item":"https://intervalrain.github.io/docker/"},{"@type":"ListItem","position":2,"name":"[Docker] Docker 指令 以 NATS 為例","item":"https://intervalrain.github.io/docker/docker-nats-commands/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"[Docker] Docker 指令 以 NATS 為例","name":"[Docker] Docker 指令 以 NATS 為例","description":"Docker commands collection","keywords":["Docker","NATS"],"articleBody":"Docker NATS Server 指令大全 1. 容器生命週期管理 創建並啟動容器 # 基本啟動（無配置文件） docker run -d \\ --name nats-server \\ -p 4222:4222 \\ -p 8222:8222 \\ nats:latest # 使用配置文件 docker run -d \\ --name nats-server \\ -p 4222:4222 \\ -p 8222:8222 \\ -v $(pwd)/nats-server.conf:/nats-server.conf \\ nats:latest \\ --config /nats-server.conf # 啟用 JetStream docker run -d \\ --name nats-server \\ -p 4222:4222 \\ -p 8222:8222 \\ nats:latest \\ -js # 完整配置（JetStream + 持久化 + 配置文件） docker run -d \\ --name nats-server \\ -p 4222:4222 \\ -p 8222:8222 \\ -p 6222:6222 \\ -v $(pwd)/nats-data:/data \\ -v $(pwd)/nats-server.conf:/nats-server.conf \\ nats:latest \\ -js -sd /data --config /nats-server.conf 參數說明：\n-d: 後台運行（detached mode） --name: 容器名稱 -p 4222:4222: 客戶端連接端口 -p 8222:8222: HTTP 監控端口 -p 6222:6222: 集群路由端口 -v: 掛載卷（volume mount） -js: 啟用 JetStream -sd: JetStream 存儲目錄 啟動已存在的容器 docker start nats-server 停止容器 # 正常停止（發送 SIGTERM，等待 10 秒） docker stop nats-server # 強制停止（發送 SIGKILL） docker kill nats-server # 停止並等待指定秒數 docker stop -t 30 nats-server 重啟容器 docker restart nats-server 暫停/恢復容器 # 暫停（凍結進程） docker pause nats-server # 恢復 docker unpause nats-server 2. 容器查詢與監控 查看容器列表 # 查看運行中的容器 docker ps # 查看所有容器（包括已停止） docker ps -a # 只顯示容器 ID docker ps -q # 過濾查看 NATS 容器 docker ps | grep nats docker ps -a --filter \"name=nats\" 查看容器詳細信息 # 完整信息（JSON 格式） docker inspect nats-server # 查看特定字段 docker inspect nats-server --format='{{.State.Status}}' docker inspect nats-server --format='{{.NetworkSettings.IPAddress}}' docker inspect nats-server --format='{{.Config.Cmd}}' docker inspect nats-server --format='{{.HostConfig.PortBindings}}' 查看容器日誌 # 查看全部日誌 docker logs nats-server # 實時跟蹤日誌（類似 tail -f） docker logs -f nats-server # 查看最後 100 行 docker logs --tail 100 nats-server # 顯示時間戳 docker logs -t nats-server # 查看最近 10 分鐘的日誌 docker logs --since 10m nats-server # 查看某個時間點之後的日誌 docker logs --since 2025-01-01T00:00:00 nats-server 查看容器資源使用 # 查看實時資源使用（CPU、內存、網絡、磁盤） docker stats nats-server # 查看所有容器的資源使用 docker stats # 只顯示一次（不實時更新） docker stats --no-stream nats-server 查看容器進程 docker top nats-server 查看容器端口映射 docker port nats-server 3. 容器交互 進入容器 # 使用 bash（如果容器有 bash） docker exec -it nats-server bash # 使用 sh（NATS 容器通常只有 sh） docker exec -it nats-server sh # 執行單個命令 docker exec nats-server ps aux docker exec nats-server ls -la /data 從容器複製文件 # 從容器複製到主機 docker cp nats-server:/nats-server.conf ./nats-server.conf docker cp nats-server:/data ./nats-data # 從主機複製到容器 docker cp ./nats-server.conf nats-server:/nats-server.conf 4. 容器刪除與清理 刪除容器 # 刪除已停止的容器 docker rm nats-server # 強制刪除運行中的容器 docker rm -f nats-server # 刪除多個容器 docker rm nats-server nats-server-2 # 刪除所有已停止的容器 docker container prune # 刪除所有容器（危險！） docker rm -f $(docker ps -aq) 5. 鏡像管理 查看鏡像 # 列出所有鏡像 docker images # 查看 NATS 鏡像 docker images | grep nats 拉取鏡像 # 拉取最新版本 docker pull nats:latest # 拉取特定版本 docker pull nats:2.10.7 docker pull nats:2.10.7-alpine # 拉取所有標籤 docker pull -a nats 刪除鏡像 # 刪除指定鏡像 docker rmi nats:latest # 強制刪除 docker rmi -f nats:latest # 刪除未使用的鏡像 docker image prune # 刪除所有未使用的鏡像 docker image prune -a 6. 網絡管理 查看網絡 # 列出所有網絡 docker network ls # 查看容器使用的網絡 docker inspect nats-server --format='{{.NetworkSettings.Networks}}' 創建自定義網絡 # 創建網絡 docker network create nats-network # 在自定義網絡中啟動容器 docker run -d \\ --name nats-server \\ --network nats-network \\ -p 4222:4222 \\ nats:latest # 將現有容器連接到網絡 docker network connect nats-network nats-server # 斷開網絡連接 docker network disconnect nats-network nats-server 7. 卷（Volume）管理 查看卷 # 列出所有卷 docker volume ls # 查看卷詳情 docker volume inspect nats-data 創建卷 # 創建命名卷 docker volume create nats-data # 使用卷啟動容器 docker run -d \\ --name nats-server \\ -v nats-data:/data \\ -p 4222:4222 \\ nats:latest \\ -js -sd /data 刪除卷 # 刪除指定卷 docker volume rm nats-data # 刪除未使用的卷 docker volume prune 8. Docker Compose 管理 創建 docker-compose.yml version: '3.8' services: nats: image: nats:latest container_name: nats-server ports: - \"4222:4222\" # Client port - \"8222:8222\" # HTTP monitoring - \"6222:6222\" # Routing port for clustering command: [\"-js\", \"-sd\", \"/data\"] volumes: - nats-data:/data - ./nats-server.conf:/nats-server.conf restart: unless-stopped volumes: nats-data: Docker Compose 指令 # 啟動服務（後台運行） docker-compose up -d # 啟動服務（前台運行，查看日誌） docker-compose up # 停止服務（保留容器） docker-compose stop # 停止並刪除容器 docker-compose down # 停止並刪除容器、網絡、卷 docker-compose down -v # 查看服務狀態 docker-compose ps # 查看日誌 docker-compose logs docker-compose logs -f nats # 重啟服務 docker-compose restart # 重新構建並啟動 docker-compose up -d --build # 擴展服務（運行多個實例） docker-compose up -d --scale nats=3 9. 實用組合指令 快速重建容器 # 停止、刪除、重新創建 docker stop nats-server \u0026\u0026 docker rm nats-server \u0026\u0026 \\ docker run -d \\ --name nats-server \\ -p 4222:4222 \\ -p 8222:8222 \\ nats:latest -js 查看容器完整配置 docker run --rm nats:latest --help docker run --rm nats:latest --version 清理所有 NATS 相關資源 # 停止並刪除所有 NATS 容器 docker ps -a | grep nats | awk '{print $1}' | xargs docker rm -f # 刪除 NATS 鏡像 docker images | grep nats | awk '{print $3}' | xargs docker rmi -f # 刪除 NATS 卷 docker volume ls | grep nats | awk '{print $2}' | xargs docker volume rm 10. 健康檢查與診斷 檢查 NATS 服務是否正常 # 檢查端口是否開放 docker exec nats-server sh -c \"nc -zv localhost 4222\" # 查看 NATS 服務器信息（需要安裝 curl） curl http://localhost:8222/varz # 使用 NATS CLI 測試（需要安裝 nats-cli） docker run --rm -it --network host nats:latest nats-server -v 導出容器為鏡像 # 將運行中的容器保存為新鏡像 docker commit nats-server my-nats:v1.0 # 導出鏡像為 tar 文件 docker save -o nats-backup.tar nats:latest # 從 tar 文件導入鏡像 docker load -i nats-backup.tar 11. 常用場景 開發環境：快速啟動 NATS docker run -d --name nats -p 4222:4222 -p 8222:8222 nats:latest -js 測試環境：臨時容器（退出自動刪除） docker run --rm -it -p 4222:4222 nats:latest 生產環境：持久化 + 配置文件 docker run -d \\ --name nats-prod \\ --restart=always \\ -p 4222:4222 \\ -p 8222:8222 \\ -p 6222:6222 \\ -v /opt/nats/data:/data \\ -v /opt/nats/nats-server.conf:/nats-server.conf \\ nats:latest \\ -js -sd /data --config /nats-server.conf 12. 疑難排解 容器無法啟動 # 查看詳細錯誤信息 docker logs nats-server docker inspect nats-server | grep -i error # 檢查端口是否被佔用 lsof -i :4222 netstat -an | grep 4222 容器運行但無法連接 # 檢查防火牆 sudo iptables -L # 檢查容器網絡 docker inspect nats-server --format='{{.NetworkSettings.IPAddress}}' # 測試容器內部連接 docker exec nats-server nc -zv localhost 4222 性能問題 # 查看資源限制 docker inspect nats-server --format='{{.HostConfig.Memory}}' docker inspect nats-server --format='{{.HostConfig.CpuShares}}' # 設置資源限制 docker run -d \\ --name nats-server \\ --memory=\"512m\" \\ --cpus=\"1.0\" \\ -p 4222:4222 \\ nats:latest 快速參考表 操作 指令 創建並啟動 docker run -d --name nats -p 4222:4222 nats:latest 啟動 docker start nats-server 停止 docker stop nats-server 重啟 docker restart nats-server 刪除 docker rm -f nats-server 查看日誌 docker logs -f nats-server 進入容器 docker exec -it nats-server sh 查看狀態 `docker ps -a 查看資源 docker stats nats-server ","wordCount":"978","inLanguage":"zh-tw","image":"https://intervalrain.github.io/images/cover.jpg","datePublished":"2025-10-05T06:39:57+08:00","dateModified":"2025-10-05T06:39:57+08:00","author":{"@type":"Person","name":"Rain Hu"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://intervalrain.github.io/docker/docker-nats-commands/"},"publisher":{"@type":"Organization","name":"Rain Hu's Workspace","logo":{"@type":"ImageObject","url":"https://intervalrain.github.io/images/rain.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://intervalrain.github.io/ accesskey=h title="Rain Hu's Workspace (Alt + H)"><img src=https://intervalrain.github.io/images/rain.png alt aria-label=logo height=35>Rain Hu's Workspace</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://intervalrain.github.io/search title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://intervalrain.github.io/aboutme title="About me"><span>About me</span></a></li><li><a href=https://intervalrain.github.io/archives title=Archives><span>Archives</span></a></li><li><a href=https://intervalrain.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://intervalrain.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://intervalrain.github.io/csharp/csharp title=C#><span>C#</span></a></li><li><a href=https://intervalrain.github.io/csindex title=CS><span>CS</span></a></li><li><a href=https://intervalrain.github.io/leetcode title=LeetCode><span>LeetCode</span></a></li><li><a href=https://intervalrain.github.io/ai title=AI><span>AI</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://intervalrain.github.io/>首頁</a>&nbsp;»&nbsp;<a href=https://intervalrain.github.io/docker/>Dockers</a></div><h1 class="post-title entry-hint-parent">[Docker] Docker 指令 以 NATS 為例</h1><div class=post-description>Docker commands collection</div><div class=post-meta><span title='2025-10-05 06:39:57 +0800 +0800'>October 5, 2025</span>&nbsp;·&nbsp;5 分鐘&nbsp;·&nbsp;Rain Hu&nbsp;|&nbsp;<a href=https://github.com/intervalrain/intervalrain.github.io/tree/main/content//docker/docker-nats-commands.md rel="noopener noreferrer edit" target=_blank>Suggest Changes</a></div></header><figure class=entry-cover><img loading=eager src=https://intervalrain.github.io/images/cover.jpg alt="Oh! You closed up the window, so you cannot see raining"></figure><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>目錄</span></summary><div class=inner><ul><li><a href=#docker-nats-server-%e6%8c%87%e4%bb%a4%e5%a4%a7%e5%85%a8 aria-label="Docker NATS Server 指令大全">Docker NATS Server 指令大全</a><ul><li><a href=#1-%e5%ae%b9%e5%99%a8%e7%94%9f%e5%91%bd%e9%80%b1%e6%9c%9f%e7%ae%a1%e7%90%86 aria-label="1. 容器生命週期管理">1. 容器生命週期管理</a><ul><li><a href=#%e5%89%b5%e5%bb%ba%e4%b8%a6%e5%95%9f%e5%8b%95%e5%ae%b9%e5%99%a8 aria-label=創建並啟動容器>創建並啟動容器</a></li><li><a href=#%e5%95%9f%e5%8b%95%e5%b7%b2%e5%ad%98%e5%9c%a8%e7%9a%84%e5%ae%b9%e5%99%a8 aria-label=啟動已存在的容器>啟動已存在的容器</a></li><li><a href=#%e5%81%9c%e6%ad%a2%e5%ae%b9%e5%99%a8 aria-label=停止容器>停止容器</a></li><li><a href=#%e9%87%8d%e5%95%9f%e5%ae%b9%e5%99%a8 aria-label=重啟容器>重啟容器</a></li><li><a href=#%e6%9a%ab%e5%81%9c%e6%81%a2%e5%be%a9%e5%ae%b9%e5%99%a8 aria-label=暫停/恢復容器>暫停/恢復容器</a></li></ul></li><li><a href=#2-%e5%ae%b9%e5%99%a8%e6%9f%a5%e8%a9%a2%e8%88%87%e7%9b%a3%e6%8e%a7 aria-label="2. 容器查詢與監控">2. 容器查詢與監控</a><ul><li><a href=#%e6%9f%a5%e7%9c%8b%e5%ae%b9%e5%99%a8%e5%88%97%e8%a1%a8 aria-label=查看容器列表>查看容器列表</a></li><li><a href=#%e6%9f%a5%e7%9c%8b%e5%ae%b9%e5%99%a8%e8%a9%b3%e7%b4%b0%e4%bf%a1%e6%81%af aria-label=查看容器詳細信息>查看容器詳細信息</a></li><li><a href=#%e6%9f%a5%e7%9c%8b%e5%ae%b9%e5%99%a8%e6%97%a5%e8%aa%8c aria-label=查看容器日誌>查看容器日誌</a></li><li><a href=#%e6%9f%a5%e7%9c%8b%e5%ae%b9%e5%99%a8%e8%b3%87%e6%ba%90%e4%bd%bf%e7%94%a8 aria-label=查看容器資源使用>查看容器資源使用</a></li><li><a href=#%e6%9f%a5%e7%9c%8b%e5%ae%b9%e5%99%a8%e9%80%b2%e7%a8%8b aria-label=查看容器進程>查看容器進程</a></li><li><a href=#%e6%9f%a5%e7%9c%8b%e5%ae%b9%e5%99%a8%e7%ab%af%e5%8f%a3%e6%98%a0%e5%b0%84 aria-label=查看容器端口映射>查看容器端口映射</a></li></ul></li><li><a href=#3-%e5%ae%b9%e5%99%a8%e4%ba%a4%e4%ba%92 aria-label="3. 容器交互">3. 容器交互</a><ul><li><a href=#%e9%80%b2%e5%85%a5%e5%ae%b9%e5%99%a8 aria-label=進入容器>進入容器</a></li><li><a href=#%e5%be%9e%e5%ae%b9%e5%99%a8%e8%a4%87%e8%a3%bd%e6%96%87%e4%bb%b6 aria-label=從容器複製文件>從容器複製文件</a></li></ul></li><li><a href=#4-%e5%ae%b9%e5%99%a8%e5%88%aa%e9%99%a4%e8%88%87%e6%b8%85%e7%90%86 aria-label="4. 容器刪除與清理">4. 容器刪除與清理</a><ul><li><a href=#%e5%88%aa%e9%99%a4%e5%ae%b9%e5%99%a8 aria-label=刪除容器>刪除容器</a></li></ul></li><li><a href=#5-%e9%8f%a1%e5%83%8f%e7%ae%a1%e7%90%86 aria-label="5. 鏡像管理">5. 鏡像管理</a><ul><li><a href=#%e6%9f%a5%e7%9c%8b%e9%8f%a1%e5%83%8f aria-label=查看鏡像>查看鏡像</a></li><li><a href=#%e6%8b%89%e5%8f%96%e9%8f%a1%e5%83%8f aria-label=拉取鏡像>拉取鏡像</a></li><li><a href=#%e5%88%aa%e9%99%a4%e9%8f%a1%e5%83%8f aria-label=刪除鏡像>刪除鏡像</a></li></ul></li><li><a href=#6-%e7%b6%b2%e7%b5%a1%e7%ae%a1%e7%90%86 aria-label="6. 網絡管理">6. 網絡管理</a><ul><li><a href=#%e6%9f%a5%e7%9c%8b%e7%b6%b2%e7%b5%a1 aria-label=查看網絡>查看網絡</a></li><li><a href=#%e5%89%b5%e5%bb%ba%e8%87%aa%e5%ae%9a%e7%be%a9%e7%b6%b2%e7%b5%a1 aria-label=創建自定義網絡>創建自定義網絡</a></li></ul></li><li><a href=#7-%e5%8d%b7volume%e7%ae%a1%e7%90%86 aria-label="7. 卷（Volume）管理">7. 卷（Volume）管理</a><ul><li><a href=#%e6%9f%a5%e7%9c%8b%e5%8d%b7 aria-label=查看卷>查看卷</a></li><li><a href=#%e5%89%b5%e5%bb%ba%e5%8d%b7 aria-label=創建卷>創建卷</a></li><li><a href=#%e5%88%aa%e9%99%a4%e5%8d%b7 aria-label=刪除卷>刪除卷</a></li></ul></li><li><a href=#8-docker-compose-%e7%ae%a1%e7%90%86 aria-label="8. Docker Compose 管理">8. Docker Compose 管理</a><ul><li><a href=#%e5%89%b5%e5%bb%ba-docker-composeyml aria-label="創建 docker-compose.yml">創建 docker-compose.yml</a></li><li><a href=#docker-compose-%e6%8c%87%e4%bb%a4 aria-label="Docker Compose 指令">Docker Compose 指令</a></li></ul></li><li><a href=#9-%e5%af%a6%e7%94%a8%e7%b5%84%e5%90%88%e6%8c%87%e4%bb%a4 aria-label="9. 實用組合指令">9. 實用組合指令</a><ul><li><a href=#%e5%bf%ab%e9%80%9f%e9%87%8d%e5%bb%ba%e5%ae%b9%e5%99%a8 aria-label=快速重建容器>快速重建容器</a></li><li><a href=#%e6%9f%a5%e7%9c%8b%e5%ae%b9%e5%99%a8%e5%ae%8c%e6%95%b4%e9%85%8d%e7%bd%ae aria-label=查看容器完整配置>查看容器完整配置</a></li><li><a href=#%e6%b8%85%e7%90%86%e6%89%80%e6%9c%89-nats-%e7%9b%b8%e9%97%9c%e8%b3%87%e6%ba%90 aria-label="清理所有 NATS 相關資源">清理所有 NATS 相關資源</a></li></ul></li><li><a href=#10-%e5%81%a5%e5%ba%b7%e6%aa%a2%e6%9f%a5%e8%88%87%e8%a8%ba%e6%96%b7 aria-label="10. 健康檢查與診斷">10. 健康檢查與診斷</a><ul><li><a href=#%e6%aa%a2%e6%9f%a5-nats-%e6%9c%8d%e5%8b%99%e6%98%af%e5%90%a6%e6%ad%a3%e5%b8%b8 aria-label="檢查 NATS 服務是否正常">檢查 NATS 服務是否正常</a></li><li><a href=#%e5%b0%8e%e5%87%ba%e5%ae%b9%e5%99%a8%e7%82%ba%e9%8f%a1%e5%83%8f aria-label=導出容器為鏡像>導出容器為鏡像</a></li></ul></li><li><a href=#11-%e5%b8%b8%e7%94%a8%e5%a0%b4%e6%99%af aria-label="11. 常用場景">11. 常用場景</a><ul><li><a href=#%e9%96%8b%e7%99%bc%e7%92%b0%e5%a2%83%e5%bf%ab%e9%80%9f%e5%95%9f%e5%8b%95-nats aria-label="開發環境：快速啟動 NATS">開發環境：快速啟動 NATS</a></li><li><a href=#%e6%b8%ac%e8%a9%a6%e7%92%b0%e5%a2%83%e8%87%a8%e6%99%82%e5%ae%b9%e5%99%a8%e9%80%80%e5%87%ba%e8%87%aa%e5%8b%95%e5%88%aa%e9%99%a4 aria-label=測試環境：臨時容器（退出自動刪除）>測試環境：臨時容器（退出自動刪除）</a></li><li><a href=#%e7%94%9f%e7%94%a2%e7%92%b0%e5%a2%83%e6%8c%81%e4%b9%85%e5%8c%96--%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6 aria-label="生產環境：持久化 + 配置文件">生產環境：持久化 + 配置文件</a></li></ul></li><li><a href=#12-%e7%96%91%e9%9b%a3%e6%8e%92%e8%a7%a3 aria-label="12. 疑難排解">12. 疑難排解</a><ul><li><a href=#%e5%ae%b9%e5%99%a8%e7%84%a1%e6%b3%95%e5%95%9f%e5%8b%95 aria-label=容器無法啟動>容器無法啟動</a></li><li><a href=#%e5%ae%b9%e5%99%a8%e9%81%8b%e8%a1%8c%e4%bd%86%e7%84%a1%e6%b3%95%e9%80%a3%e6%8e%a5 aria-label=容器運行但無法連接>容器運行但無法連接</a></li><li><a href=#%e6%80%a7%e8%83%bd%e5%95%8f%e9%a1%8c aria-label=性能問題>性能問題</a></li></ul></li><li><a href=#%e5%bf%ab%e9%80%9f%e5%8f%83%e8%80%83%e8%a1%a8 aria-label=快速參考表>快速參考表</a></li></ul></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h1 id=docker-nats-server-指令大全>Docker NATS Server 指令大全<a hidden class=anchor aria-hidden=true href=#docker-nats-server-指令大全>#</a></h1><h2 id=1-容器生命週期管理>1. 容器生命週期管理<a hidden class=anchor aria-hidden=true href=#1-容器生命週期管理>#</a></h2><h3 id=創建並啟動容器>創建並啟動容器<a hidden class=anchor aria-hidden=true href=#創建並啟動容器>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 基本啟動（無配置文件）</span>
</span></span><span style=display:flex><span>docker run -d <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --name nats-server <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -p 4222:4222 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -p 8222:8222 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  nats:latest
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 使用配置文件</span>
</span></span><span style=display:flex><span>docker run -d <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --name nats-server <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -p 4222:4222 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -p 8222:8222 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -v <span style=color:#66d9ef>$(</span>pwd<span style=color:#66d9ef>)</span>/nats-server.conf:/nats-server.conf <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  nats:latest <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --config /nats-server.conf
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 啟用 JetStream</span>
</span></span><span style=display:flex><span>docker run -d <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --name nats-server <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -p 4222:4222 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -p 8222:8222 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  nats:latest <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -js
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 完整配置（JetStream + 持久化 + 配置文件）</span>
</span></span><span style=display:flex><span>docker run -d <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --name nats-server <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -p 4222:4222 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -p 8222:8222 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -p 6222:6222 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -v <span style=color:#66d9ef>$(</span>pwd<span style=color:#66d9ef>)</span>/nats-data:/data <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -v <span style=color:#66d9ef>$(</span>pwd<span style=color:#66d9ef>)</span>/nats-server.conf:/nats-server.conf <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  nats:latest <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -js -sd /data --config /nats-server.conf
</span></span></code></pre></div><p><strong>參數說明：</strong></p><ul><li><code>-d</code>: 後台運行（detached mode）</li><li><code>--name</code>: 容器名稱</li><li><code>-p 4222:4222</code>: 客戶端連接端口</li><li><code>-p 8222:8222</code>: HTTP 監控端口</li><li><code>-p 6222:6222</code>: 集群路由端口</li><li><code>-v</code>: 掛載卷（volume mount）</li><li><code>-js</code>: 啟用 JetStream</li><li><code>-sd</code>: JetStream 存儲目錄</li></ul><h3 id=啟動已存在的容器>啟動已存在的容器<a hidden class=anchor aria-hidden=true href=#啟動已存在的容器>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker start nats-server
</span></span></code></pre></div><h3 id=停止容器>停止容器<a hidden class=anchor aria-hidden=true href=#停止容器>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 正常停止（發送 SIGTERM，等待 10 秒）</span>
</span></span><span style=display:flex><span>docker stop nats-server
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 強制停止（發送 SIGKILL）</span>
</span></span><span style=display:flex><span>docker kill nats-server
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 停止並等待指定秒數</span>
</span></span><span style=display:flex><span>docker stop -t <span style=color:#ae81ff>30</span> nats-server
</span></span></code></pre></div><h3 id=重啟容器>重啟容器<a hidden class=anchor aria-hidden=true href=#重啟容器>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker restart nats-server
</span></span></code></pre></div><h3 id=暫停恢復容器>暫停/恢復容器<a hidden class=anchor aria-hidden=true href=#暫停恢復容器>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 暫停（凍結進程）</span>
</span></span><span style=display:flex><span>docker pause nats-server
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 恢復</span>
</span></span><span style=display:flex><span>docker unpause nats-server
</span></span></code></pre></div><h2 id=2-容器查詢與監控>2. 容器查詢與監控<a hidden class=anchor aria-hidden=true href=#2-容器查詢與監控>#</a></h2><h3 id=查看容器列表>查看容器列表<a hidden class=anchor aria-hidden=true href=#查看容器列表>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 查看運行中的容器</span>
</span></span><span style=display:flex><span>docker ps
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看所有容器（包括已停止）</span>
</span></span><span style=display:flex><span>docker ps -a
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 只顯示容器 ID</span>
</span></span><span style=display:flex><span>docker ps -q
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 過濾查看 NATS 容器</span>
</span></span><span style=display:flex><span>docker ps | grep nats
</span></span><span style=display:flex><span>docker ps -a --filter <span style=color:#e6db74>&#34;name=nats&#34;</span>
</span></span></code></pre></div><h3 id=查看容器詳細信息>查看容器詳細信息<a hidden class=anchor aria-hidden=true href=#查看容器詳細信息>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 完整信息（JSON 格式）</span>
</span></span><span style=display:flex><span>docker inspect nats-server
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看特定字段</span>
</span></span><span style=display:flex><span>docker inspect nats-server --format<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;{{.State.Status}}&#39;</span>
</span></span><span style=display:flex><span>docker inspect nats-server --format<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;{{.NetworkSettings.IPAddress}}&#39;</span>
</span></span><span style=display:flex><span>docker inspect nats-server --format<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;{{.Config.Cmd}}&#39;</span>
</span></span><span style=display:flex><span>docker inspect nats-server --format<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;{{.HostConfig.PortBindings}}&#39;</span>
</span></span></code></pre></div><h3 id=查看容器日誌>查看容器日誌<a hidden class=anchor aria-hidden=true href=#查看容器日誌>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 查看全部日誌</span>
</span></span><span style=display:flex><span>docker logs nats-server
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 實時跟蹤日誌（類似 tail -f）</span>
</span></span><span style=display:flex><span>docker logs -f nats-server
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看最後 100 行</span>
</span></span><span style=display:flex><span>docker logs --tail <span style=color:#ae81ff>100</span> nats-server
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 顯示時間戳</span>
</span></span><span style=display:flex><span>docker logs -t nats-server
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看最近 10 分鐘的日誌</span>
</span></span><span style=display:flex><span>docker logs --since 10m nats-server
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看某個時間點之後的日誌</span>
</span></span><span style=display:flex><span>docker logs --since 2025-01-01T00:00:00 nats-server
</span></span></code></pre></div><h3 id=查看容器資源使用>查看容器資源使用<a hidden class=anchor aria-hidden=true href=#查看容器資源使用>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 查看實時資源使用（CPU、內存、網絡、磁盤）</span>
</span></span><span style=display:flex><span>docker stats nats-server
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看所有容器的資源使用</span>
</span></span><span style=display:flex><span>docker stats
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 只顯示一次（不實時更新）</span>
</span></span><span style=display:flex><span>docker stats --no-stream nats-server
</span></span></code></pre></div><h3 id=查看容器進程>查看容器進程<a hidden class=anchor aria-hidden=true href=#查看容器進程>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker top nats-server
</span></span></code></pre></div><h3 id=查看容器端口映射>查看容器端口映射<a hidden class=anchor aria-hidden=true href=#查看容器端口映射>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker port nats-server
</span></span></code></pre></div><h2 id=3-容器交互>3. 容器交互<a hidden class=anchor aria-hidden=true href=#3-容器交互>#</a></h2><h3 id=進入容器>進入容器<a hidden class=anchor aria-hidden=true href=#進入容器>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 使用 bash（如果容器有 bash）</span>
</span></span><span style=display:flex><span>docker exec -it nats-server bash
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 使用 sh（NATS 容器通常只有 sh）</span>
</span></span><span style=display:flex><span>docker exec -it nats-server sh
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 執行單個命令</span>
</span></span><span style=display:flex><span>docker exec nats-server ps aux
</span></span><span style=display:flex><span>docker exec nats-server ls -la /data
</span></span></code></pre></div><h3 id=從容器複製文件>從容器複製文件<a hidden class=anchor aria-hidden=true href=#從容器複製文件>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 從容器複製到主機</span>
</span></span><span style=display:flex><span>docker cp nats-server:/nats-server.conf ./nats-server.conf
</span></span><span style=display:flex><span>docker cp nats-server:/data ./nats-data
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 從主機複製到容器</span>
</span></span><span style=display:flex><span>docker cp ./nats-server.conf nats-server:/nats-server.conf
</span></span></code></pre></div><h2 id=4-容器刪除與清理>4. 容器刪除與清理<a hidden class=anchor aria-hidden=true href=#4-容器刪除與清理>#</a></h2><h3 id=刪除容器>刪除容器<a hidden class=anchor aria-hidden=true href=#刪除容器>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 刪除已停止的容器</span>
</span></span><span style=display:flex><span>docker rm nats-server
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 強制刪除運行中的容器</span>
</span></span><span style=display:flex><span>docker rm -f nats-server
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 刪除多個容器</span>
</span></span><span style=display:flex><span>docker rm nats-server nats-server-2
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 刪除所有已停止的容器</span>
</span></span><span style=display:flex><span>docker container prune
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 刪除所有容器（危險！）</span>
</span></span><span style=display:flex><span>docker rm -f <span style=color:#66d9ef>$(</span>docker ps -aq<span style=color:#66d9ef>)</span>
</span></span></code></pre></div><h2 id=5-鏡像管理>5. 鏡像管理<a hidden class=anchor aria-hidden=true href=#5-鏡像管理>#</a></h2><h3 id=查看鏡像>查看鏡像<a hidden class=anchor aria-hidden=true href=#查看鏡像>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 列出所有鏡像</span>
</span></span><span style=display:flex><span>docker images
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看 NATS 鏡像</span>
</span></span><span style=display:flex><span>docker images | grep nats
</span></span></code></pre></div><h3 id=拉取鏡像>拉取鏡像<a hidden class=anchor aria-hidden=true href=#拉取鏡像>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 拉取最新版本</span>
</span></span><span style=display:flex><span>docker pull nats:latest
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 拉取特定版本</span>
</span></span><span style=display:flex><span>docker pull nats:2.10.7
</span></span><span style=display:flex><span>docker pull nats:2.10.7-alpine
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 拉取所有標籤</span>
</span></span><span style=display:flex><span>docker pull -a nats
</span></span></code></pre></div><h3 id=刪除鏡像>刪除鏡像<a hidden class=anchor aria-hidden=true href=#刪除鏡像>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 刪除指定鏡像</span>
</span></span><span style=display:flex><span>docker rmi nats:latest
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 強制刪除</span>
</span></span><span style=display:flex><span>docker rmi -f nats:latest
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 刪除未使用的鏡像</span>
</span></span><span style=display:flex><span>docker image prune
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 刪除所有未使用的鏡像</span>
</span></span><span style=display:flex><span>docker image prune -a
</span></span></code></pre></div><h2 id=6-網絡管理>6. 網絡管理<a hidden class=anchor aria-hidden=true href=#6-網絡管理>#</a></h2><h3 id=查看網絡>查看網絡<a hidden class=anchor aria-hidden=true href=#查看網絡>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 列出所有網絡</span>
</span></span><span style=display:flex><span>docker network ls
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看容器使用的網絡</span>
</span></span><span style=display:flex><span>docker inspect nats-server --format<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;{{.NetworkSettings.Networks}}&#39;</span>
</span></span></code></pre></div><h3 id=創建自定義網絡>創建自定義網絡<a hidden class=anchor aria-hidden=true href=#創建自定義網絡>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 創建網絡</span>
</span></span><span style=display:flex><span>docker network create nats-network
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 在自定義網絡中啟動容器</span>
</span></span><span style=display:flex><span>docker run -d <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --name nats-server <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --network nats-network <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -p 4222:4222 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  nats:latest
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 將現有容器連接到網絡</span>
</span></span><span style=display:flex><span>docker network connect nats-network nats-server
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 斷開網絡連接</span>
</span></span><span style=display:flex><span>docker network disconnect nats-network nats-server
</span></span></code></pre></div><h2 id=7-卷volume管理>7. 卷（Volume）管理<a hidden class=anchor aria-hidden=true href=#7-卷volume管理>#</a></h2><h3 id=查看卷>查看卷<a hidden class=anchor aria-hidden=true href=#查看卷>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 列出所有卷</span>
</span></span><span style=display:flex><span>docker volume ls
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看卷詳情</span>
</span></span><span style=display:flex><span>docker volume inspect nats-data
</span></span></code></pre></div><h3 id=創建卷>創建卷<a hidden class=anchor aria-hidden=true href=#創建卷>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 創建命名卷</span>
</span></span><span style=display:flex><span>docker volume create nats-data
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 使用卷啟動容器</span>
</span></span><span style=display:flex><span>docker run -d <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --name nats-server <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -v nats-data:/data <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -p 4222:4222 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  nats:latest <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -js -sd /data
</span></span></code></pre></div><h3 id=刪除卷>刪除卷<a hidden class=anchor aria-hidden=true href=#刪除卷>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 刪除指定卷</span>
</span></span><span style=display:flex><span>docker volume rm nats-data
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 刪除未使用的卷</span>
</span></span><span style=display:flex><span>docker volume prune
</span></span></code></pre></div><h2 id=8-docker-compose-管理>8. Docker Compose 管理<a hidden class=anchor aria-hidden=true href=#8-docker-compose-管理>#</a></h2><h3 id=創建-docker-composeyml>創建 docker-compose.yml<a hidden class=anchor aria-hidden=true href=#創建-docker-composeyml>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>version</span>: <span style=color:#e6db74>&#39;3.8&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>services</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>nats</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>nats:latest</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>nats-server</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#34;4222:4222&#34;</span>  <span style=color:#75715e># Client port</span>
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#34;8222:8222&#34;</span>  <span style=color:#75715e># HTTP monitoring</span>
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#34;6222:6222&#34;</span>  <span style=color:#75715e># Routing port for clustering</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>command</span>: [<span style=color:#e6db74>&#34;-js&#34;</span>, <span style=color:#e6db74>&#34;-sd&#34;</span>, <span style=color:#e6db74>&#34;/data&#34;</span>]
</span></span><span style=display:flex><span>    <span style=color:#f92672>volumes</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>nats-data:/data</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>./nats-server.conf:/nats-server.conf</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>restart</span>: <span style=color:#ae81ff>unless-stopped</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>volumes</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>nats-data</span>:
</span></span></code></pre></div><h3 id=docker-compose-指令>Docker Compose 指令<a hidden class=anchor aria-hidden=true href=#docker-compose-指令>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 啟動服務（後台運行）</span>
</span></span><span style=display:flex><span>docker-compose up -d
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 啟動服務（前台運行，查看日誌）</span>
</span></span><span style=display:flex><span>docker-compose up
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 停止服務（保留容器）</span>
</span></span><span style=display:flex><span>docker-compose stop
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 停止並刪除容器</span>
</span></span><span style=display:flex><span>docker-compose down
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 停止並刪除容器、網絡、卷</span>
</span></span><span style=display:flex><span>docker-compose down -v
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看服務狀態</span>
</span></span><span style=display:flex><span>docker-compose ps
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看日誌</span>
</span></span><span style=display:flex><span>docker-compose logs
</span></span><span style=display:flex><span>docker-compose logs -f nats
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 重啟服務</span>
</span></span><span style=display:flex><span>docker-compose restart
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 重新構建並啟動</span>
</span></span><span style=display:flex><span>docker-compose up -d --build
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 擴展服務（運行多個實例）</span>
</span></span><span style=display:flex><span>docker-compose up -d --scale nats<span style=color:#f92672>=</span><span style=color:#ae81ff>3</span>
</span></span></code></pre></div><h2 id=9-實用組合指令>9. 實用組合指令<a hidden class=anchor aria-hidden=true href=#9-實用組合指令>#</a></h2><h3 id=快速重建容器>快速重建容器<a hidden class=anchor aria-hidden=true href=#快速重建容器>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 停止、刪除、重新創建</span>
</span></span><span style=display:flex><span>docker stop nats-server <span style=color:#f92672>&amp;&amp;</span> docker rm nats-server <span style=color:#f92672>&amp;&amp;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>docker run -d <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --name nats-server <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -p 4222:4222 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -p 8222:8222 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  nats:latest -js
</span></span></code></pre></div><h3 id=查看容器完整配置>查看容器完整配置<a hidden class=anchor aria-hidden=true href=#查看容器完整配置>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker run --rm nats:latest --help
</span></span><span style=display:flex><span>docker run --rm nats:latest --version
</span></span></code></pre></div><h3 id=清理所有-nats-相關資源>清理所有 NATS 相關資源<a hidden class=anchor aria-hidden=true href=#清理所有-nats-相關資源>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 停止並刪除所有 NATS 容器</span>
</span></span><span style=display:flex><span>docker ps -a | grep nats | awk <span style=color:#e6db74>&#39;{print $1}&#39;</span> | xargs docker rm -f
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 刪除 NATS 鏡像</span>
</span></span><span style=display:flex><span>docker images | grep nats | awk <span style=color:#e6db74>&#39;{print $3}&#39;</span> | xargs docker rmi -f
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 刪除 NATS 卷</span>
</span></span><span style=display:flex><span>docker volume ls | grep nats | awk <span style=color:#e6db74>&#39;{print $2}&#39;</span> | xargs docker volume rm
</span></span></code></pre></div><h2 id=10-健康檢查與診斷>10. 健康檢查與診斷<a hidden class=anchor aria-hidden=true href=#10-健康檢查與診斷>#</a></h2><h3 id=檢查-nats-服務是否正常>檢查 NATS 服務是否正常<a hidden class=anchor aria-hidden=true href=#檢查-nats-服務是否正常>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 檢查端口是否開放</span>
</span></span><span style=display:flex><span>docker exec nats-server sh -c <span style=color:#e6db74>&#34;nc -zv localhost 4222&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看 NATS 服務器信息（需要安裝 curl）</span>
</span></span><span style=display:flex><span>curl http://localhost:8222/varz
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 使用 NATS CLI 測試（需要安裝 nats-cli）</span>
</span></span><span style=display:flex><span>docker run --rm -it --network host nats:latest nats-server -v
</span></span></code></pre></div><h3 id=導出容器為鏡像>導出容器為鏡像<a hidden class=anchor aria-hidden=true href=#導出容器為鏡像>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 將運行中的容器保存為新鏡像</span>
</span></span><span style=display:flex><span>docker commit nats-server my-nats:v1.0
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 導出鏡像為 tar 文件</span>
</span></span><span style=display:flex><span>docker save -o nats-backup.tar nats:latest
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 從 tar 文件導入鏡像</span>
</span></span><span style=display:flex><span>docker load -i nats-backup.tar
</span></span></code></pre></div><h2 id=11-常用場景>11. 常用場景<a hidden class=anchor aria-hidden=true href=#11-常用場景>#</a></h2><h3 id=開發環境快速啟動-nats>開發環境：快速啟動 NATS<a hidden class=anchor aria-hidden=true href=#開發環境快速啟動-nats>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker run -d --name nats -p 4222:4222 -p 8222:8222 nats:latest -js
</span></span></code></pre></div><h3 id=測試環境臨時容器退出自動刪除>測試環境：臨時容器（退出自動刪除）<a hidden class=anchor aria-hidden=true href=#測試環境臨時容器退出自動刪除>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker run --rm -it -p 4222:4222 nats:latest
</span></span></code></pre></div><h3 id=生產環境持久化--配置文件>生產環境：持久化 + 配置文件<a hidden class=anchor aria-hidden=true href=#生產環境持久化--配置文件>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker run -d <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --name nats-prod <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --restart<span style=color:#f92672>=</span>always <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -p 4222:4222 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -p 8222:8222 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -p 6222:6222 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -v /opt/nats/data:/data <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -v /opt/nats/nats-server.conf:/nats-server.conf <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  nats:latest <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -js -sd /data --config /nats-server.conf
</span></span></code></pre></div><h2 id=12-疑難排解>12. 疑難排解<a hidden class=anchor aria-hidden=true href=#12-疑難排解>#</a></h2><h3 id=容器無法啟動>容器無法啟動<a hidden class=anchor aria-hidden=true href=#容器無法啟動>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 查看詳細錯誤信息</span>
</span></span><span style=display:flex><span>docker logs nats-server
</span></span><span style=display:flex><span>docker inspect nats-server | grep -i error
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 檢查端口是否被佔用</span>
</span></span><span style=display:flex><span>lsof -i :4222
</span></span><span style=display:flex><span>netstat -an | grep <span style=color:#ae81ff>4222</span>
</span></span></code></pre></div><h3 id=容器運行但無法連接>容器運行但無法連接<a hidden class=anchor aria-hidden=true href=#容器運行但無法連接>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 檢查防火牆</span>
</span></span><span style=display:flex><span>sudo iptables -L
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 檢查容器網絡</span>
</span></span><span style=display:flex><span>docker inspect nats-server --format<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;{{.NetworkSettings.IPAddress}}&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 測試容器內部連接</span>
</span></span><span style=display:flex><span>docker exec nats-server nc -zv localhost <span style=color:#ae81ff>4222</span>
</span></span></code></pre></div><h3 id=性能問題>性能問題<a hidden class=anchor aria-hidden=true href=#性能問題>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 查看資源限制</span>
</span></span><span style=display:flex><span>docker inspect nats-server --format<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;{{.HostConfig.Memory}}&#39;</span>
</span></span><span style=display:flex><span>docker inspect nats-server --format<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;{{.HostConfig.CpuShares}}&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 設置資源限制</span>
</span></span><span style=display:flex><span>docker run -d <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --name nats-server <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --memory<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;512m&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --cpus<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;1.0&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -p 4222:4222 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  nats:latest
</span></span></code></pre></div><hr><h2 id=快速參考表>快速參考表<a hidden class=anchor aria-hidden=true href=#快速參考表>#</a></h2><table><thead><tr><th>操作</th><th>指令</th></tr></thead><tbody><tr><td>創建並啟動</td><td><code>docker run -d --name nats -p 4222:4222 nats:latest</code></td></tr><tr><td>啟動</td><td><code>docker start nats-server</code></td></tr><tr><td>停止</td><td><code>docker stop nats-server</code></td></tr><tr><td>重啟</td><td><code>docker restart nats-server</code></td></tr><tr><td>刪除</td><td><code>docker rm -f nats-server</code></td></tr><tr><td>查看日誌</td><td><code>docker logs -f nats-server</code></td></tr><tr><td>進入容器</td><td><code>docker exec -it nats-server sh</code></td></tr><tr><td>查看狀態</td><td>`docker ps -a</td></tr><tr><td>查看資源</td><td><code>docker stats nats-server</code></td></tr></tbody></table></div><footer class=post-footer><ul class=post-tags><li><a href=https://intervalrain.github.io/tags/docker/>Docker</a></li><li><a href=https://intervalrain.github.io/tags/nats/>NATS</a></li></ul><script type=module>  
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs'; 
    mermaid.initialize({ startOnLoad: true });  
</script><script>Array.from(document.getElementsByClassName("language-mermaid")).forEach(e=>{e.parentElement.outerHTML=`<div class="mermaid">${e.innerHTML}</div>`})</script><style>.mermaid svg{display:block;margin:auto}</style></footer><script src=https://utteranc.es/client.js repo=Reid00/hugo-blog-talks issue-term=pathname label=Comment theme=github-light crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2025 <a href=https://intervalrain.github.io/>Rain Hu's Workspace</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="複製";function s(){t.innerHTML="已複製！",setTimeout(()=>{t.innerHTML="複製"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>